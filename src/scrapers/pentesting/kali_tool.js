module.exports  = async (axios, cheerio) => {
  const url = 'https://tools.kali.org/tools-listing';

  return axios(url)
    .then(response => {
      const html = response.data;
      const $ = cheerio.load(html)

      //const tools = $('li > a');
      const categories = $('h5')

      // console.log(categories[0].next.next.next.next.next.next.children)
      let output = '';
      Array.from(categories).forEach(category => {

        const tools = category.next.next.next.next.next.next.children
        const random_tool = tools[Math.floor(Math.random()*(tools.length))].children[0];

        const tool_name = random_tool.children[0].data
        const tool_url = random_tool.attribs.href
        const tool_category = category.children[0].data
        //let tool_category = random_tool.parent.parent.parent.children[1].children[0].data
        // console.log(random_tool)


        output += `
          <div class='cell'>
            ${tool_category}<br>
            <a href='${tool_url}' target='_blank'>${tool_name}</a><br><br>
          </div>
        `
      })



      // skipping first row

      // // print to screen
      // console.log('Kali Tool:');
      // console.log(tool_name)
      // console.log(tool_url)
      // console.log(tool_category)
      // console.log()

      return `<div class='name'><a href='${url}' target='_blank'>Kali Tools</a>:</div><br>
              <div class='two-columns'>` + output + '</div>'
    })
    .catch(console.error);
}



